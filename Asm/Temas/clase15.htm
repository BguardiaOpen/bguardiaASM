<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>

<head>

<meta name="GENERATOR" content="Microsoft FrontPage 4.0">
<title>Apuntadores</title>
</head>

<body background="../../images/fondo-uv.gif" bgcolor="#FFFFFF">

<h1 align="center">Tema #15 </h1>

<h1 align="center">T�cnicas de programaci�n: Apuntadores </h1>

<table border="1" cellpadding="2">
    <tr>
        <td><p align="center">
        <a href="clase14.htm"><img src="../../images/anterior.gif" alt="Sesi�n Anterior" border="0" width="32" height="32"><br>
        Clase Anterior</a>
 </p>
        </td>
        <td><a href="../Sesiones/sv09.htm"><img src="../../images/light.gif" alt="Sesi�n" border="0" width="40" height="40"><br>
        Sesi�n 9</a> </td>
        <td><p align="center"><a href="../Temas/clase16.htm"><img src="../../images/sigue.gif" alt="Sesi�n Siguiente" border="0" width="32" height="32"><br>
        Clase Siguiente</a> </p>
        </td>
    </tr>
</table>
<div align="center"><center>

<table border="0">
    <tr>
        <td><h2><a href="#objetivo">Objetivos Espec�ficos</a> </h2>
        </td>
        <td><h2><a href="#teoria">Teor�a </a></h2>
        </td>
        <td><h2><a href="#biblio">Bibliograf�a </a></h2>
        </td>
    </tr>
</table>
</center></div>

<p><img src="../../images/waveline.gif" alt="L�nea de separaci�n" width="756" height="16"> </p>

<h2><a name="objetivo">Objetivos Espec�ficos</a> </h2>

<ul>
    <li>Comprender el concepto de apuntadores. </li>
    <li>Revisar su uso para acceder eficientemente a arreglos. </li>
    <li>Revisar su uso para construir listas y �rboles. </li>
</ul>

<p><img src="../../images/waveline.gif" alt="L�nea de separaci�n" width="756" height="16"> </p>

<h2><a name="objetivo">Teor�a</a> </h2>

<blockquote>
  <font FACE="Helv" SIZE="2" COLOR="#000000">
  <h3>�Qu� es un apuntador?</h3>
  <p>
  Existen diversos problemas en los cuales se requiere referenciar un dato. Por ejemplo, si tenemos la informaci�n de los alumnos de Ensamblador y sus calificaciones:
  </p>
  </blockquote>
</font>

<table CELLSPACING="0" BORDER="0" CELLPADDING="3" WIDTH="336">
<tr>
<td WIDTH="121"><b><font FACE="Helv" SIZE="2" COLOR="#000000">
<p ALIGN="CENTER">
Matr�cula</font></b></td>
<td WIDTH="115"><b><font FACE="Helv" SIZE="2" COLOR="#000000">
<p ALIGN="CENTER">
Nombre</font></b></td>
<td WIDTH="76"><b><font FACE="Helv" SIZE="2" COLOR="#000000">
<p ALIGN="CENTER">
Carrera</font></b></td>
</tr>
<tr>
<td WIDTH="121"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
123456</font></td>
<td WIDTH="115"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
Juan</font></td>
<td WIDTH="76"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
ISC</font></td>
</tr>
<tr>
<td WIDTH="121"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
654321</font></td>
<td WIDTH="115"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
Luis</font></td>
<td WIDTH="76"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
ISE</font></td>
</tr>
<tr>
<td WIDTH="121"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
333111</font></td>
<td WIDTH="115"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
Pepe</font></td>
<td WIDTH="76"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
IEC</font></td>
</tr>
</table>
<p>&nbsp;</p>
<font FACE="Helv" SIZE="2" COLOR="#000000"></font>
<table CELLSPACING="0" BORDER="0" CELLPADDING="3" WIDTH="335">
<tr>
<td WIDTH="120"><b><font FACE="Helv" SIZE="2" COLOR="#000000">
<p ALIGN="CENTER">
Matr�cula</font></b></td>
<td WIDTH="83"><b><font FACE="Helv" SIZE="2" COLOR="#000000">
<p ALIGN="CENTER">
Parcial</font></b></td>
<td WIDTH="108"><b><font FACE="Helv" SIZE="2" COLOR="#000000">
<p ALIGN="CENTER">
Calificaci�n</font></b></td>
</tr>
<tr>
<td WIDTH="120"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
123456</font></td>
<td WIDTH="83"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
1</font></td>
<td WIDTH="108"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
80</font></td>
</tr>
<tr>
<td WIDTH="120"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
123456</font></td>
<td WIDTH="83"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
2</font></td>
<td WIDTH="108"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
93</font></td>
</tr>
<tr>
<td WIDTH="120"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
654321</font></td>
<td WIDTH="83"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
1</font></td>
<td WIDTH="108"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
87</font></td>
</tr>
<tr>
<td WIDTH="120"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
333111</font></td>
<td WIDTH="83"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
1</font></td>
<td WIDTH="108"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
69</font></td>
</tr>
</table>


<font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
&nbsp;
</p>
<blockquote>
  <p>
  Por ejemplo, la primera tabla describe la relaci�n entre los alumnos, su nombre y su carrera. Mientras que la segunda, describe la relaci�n entre los alumnos y sus
  calificaciones.
  </p>
  <p>
  En este contexto, la relaci�n entre los dos arreglos que corresponder�an a las tablas en memoria, est� dada</font> <font FACE="Helv" SIZE="2" COLOR="#000000">por el
  campo de Matr�cula, que es tipo entero. En general, en cualquier problema similar existir� un campo com�n que permite relacionar los dos arreglos.
  </p>
  <p>
  En el ejemplo de arriba, la relaci�n es eficiente y minimiza el gasto de memoria; pero existen problemas en los que la relaci�n requiere demasiada memoria, adem�s de
  un algoritmo de b�squeda que requerir� m�s tiempo para ejecutarse. Por ejemplo:
  </p>

<blockquote>
  <p>
  &nbsp;
  </p>
  </blockquote>
<table CELLSPACING="0" BORDER="0" CELLPADDING="3" WIDTH="472">
<tr>
<td WIDTH="335"><b><font FACE="Helv" SIZE="2" COLOR="#000000">
<p ALIGN="CENTER">
Nombre</font></b></td>
<td WIDTH="1"><b><font FACE="Helv" SIZE="2" COLOR="#000000">
<p ALIGN="CENTER">
Carrera</font></b></td>
</tr>
<tr>
<td WIDTH="335"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
Juan Pablo Contreras Luna</font></td>
<td WIDTH="1"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
ISC</font></td>
</tr>
<tr>
<td WIDTH="335"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
Luis Alberto Guti�rrez de GomezLanda</font></td>
<td WIDTH="1"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
ISE</font></td>
</tr>
<tr>
<td WIDTH="335"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>Jos� de Jes�s Echeverr�a de los Monteros</font></td>
<td WIDTH="1"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
IEC</font></td>
</tr>
</table>
<p>&nbsp;</p>
<table CELLSPACING="0" BORDER="0" CELLPADDING="3" WIDTH="522">
<tr>
<td WIDTH="335"><b><font FACE="Helv" SIZE="2" COLOR="#000000">
<p ALIGN="CENTER">Nombre</font></b></td>
<td WIDTH="55"><b><font FACE="Helv" SIZE="2" COLOR="#000000">
<p ALIGN="CENTER">
Parcial</font></b></td>
<td WIDTH="108"><b><font FACE="Helv" SIZE="2" COLOR="#000000">
<p ALIGN="CENTER">
Calificaci�n</font></b></td>
</tr>
<tr>
<td WIDTH="335">
<p>
<font FACE="Helv" SIZE="2" COLOR="#000000">
Juan Pablo Contreras Luna</font></td>
<td WIDTH="55"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
1</font></td>
<td WIDTH="108"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
80</font></td>
</tr>
<tr>
<td WIDTH="335">
<p>
<font FACE="Helv" SIZE="2" COLOR="#000000">
Juan Pablo Contreras Luna</font></td>
<td WIDTH="55"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
2</font></td>
<td WIDTH="108"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
93</font></td>
</tr>
<tr>
<td WIDTH="335">
<p>
<font FACE="Helv" SIZE="2" COLOR="#000000">
Jos� de Jes�s Echeverr�a de los Monteros</font></td>
<td WIDTH="55"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
1</font></td>
<td WIDTH="108"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
87</font></td>
</tr>
<tr>
<td WIDTH="335">
<p>
<font FACE="Helv" SIZE="2" COLOR="#000000">
Luis Alberto Guti�rrez de GomezLanda</font></td>
<td WIDTH="55"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
1</font></td>
<td WIDTH="108"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
69</font></td>
</tr>
</table>
<p>
&nbsp;
</p>
  <p>
  En este caso, el campo com�n de los dos arreglos es bastante largo; por ello, la redundancia de ambos campos genera un alto consumo de memoria. Especialmente en los
  primeros tiempos del c�mputo, cuando se empezaban a desarrollar los lenguajes de alto nivel, se ten�an que buscar soluciones para hacer m�s eficiente el uso de la
  memoria; y como consecuencia, tambi�n m�s r�pido el procesamiento. En este caso, el procesamiento resulta lento pues para encontrar la correspondencia, se tienen que
  hacer comparaciones de cadenas, las cuales son m�s costosas y requieren m�s accesos a memoria que, por ejemplo, la b�squeda de un entero que vimos en la secci�n
  previa (la matr�cula).
  </p>
  <p>
  La primera y m�s directa soluci�n consiste en sustituir el campo largo, en la segunda tabla, por un entero que permita la b�squeda m�s eficientemente. Podr�amos
  crear un c�digo que identifique a cada elemento del arreglo, en forma �nica, como fue la matr�cula en el primer ejemplo. Sin embargo, no es necesario hacerlo, pues
  el arreglo tiene ya un identificador para cada elemento: el �ndice en el arreglo. Esto hace mucho m�s eficiente el acceso, pues ya no requiere comparaciones sino
  solamente calcular, en base al �ndice almacenado, la localidad donde est� el elemento relacionado.
  </p>
  <p>
  A�n no es la soluci�n m�s eficiente, puesto que se calcula la direcci�n destino, cuando podr�a almacenarse directamente. Por tanto, si en vez del �ndice en el
  arreglo guardamos la direcci�n de memoria donde se encuentra el elemento relacionado, no tendremos que hacer operaciones. Esto tiene adem�s la ventaja de que permite
  relacionar elementos que no est�n en un arreglo y por lo tanto no se puede calcular tan eficientemente su direcci�n; de hecho, por esta �ltima raz�n los apuntadores
  son la soluci�n natural para estructuras de datos como los �rboles y listas, que no siempre tendr�n un orden en sus elementos como ocurre con los arreglos.
  </p>
  <p>
  &nbsp;
  </p>
  <h3>
  Acciones comunes con apuntadores:
  </h3>
  <p>
  Para ejemplificar el uso de apuntadores, verificaremos dos casos comunes de aplicaci�n:
  </p>
  <p><b>a) Recorrido secuencial, apuntadores contra arreglos</b>&nbsp;
  </p>
  <p>
  En diversos algoritmos, necesitamos recorrer todos los elementos de un arreglo, especialmente en cadenas. Como ejemplo, veremos una funci�n de sumatoria, que suma
  todos los elementos en un arreglo:
  </p>
  <p>
  En lenguaje C, el c�digo ser�a:
  </p>
</blockquote>
</font>
<table CELLSPACING="0" BORDER="0" CELLPADDING="3" WIDTH="973">
<tr>
<td><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
int Arreglo[1000];
</p>
<p>
int Sumatoria()
</p>
<p>
{
</p>
<p>
int i, Temp;
</p>
<p>
&nbsp;
</p>
<p>
Temp = 0;
</p>
<p>
for (i = 0; i&lt;1000; i++)
</p>
<p>
Temp += Arreglo[i];
</p>
<p>
return Temp;
</p>
<p>
}</font></td>
</tr>
</table>
<font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
&nbsp;
</p>
<blockquote>
  <p>
  En este caso, estamos haciendo el recorrido de todos los elementos, y para cada elemento del arreglo se est� calculando su direcci�n, utilizando la f�rmula que vimos
  en el tema de &quot;Representaci�n de datos&quot;. Esto es ineficiente, por lo que en vez de implementar el uso del arreglo en ensamblador, usaremos un apuntador para
  ir a trav�s de �l.
  </p>
  <p>
  &nbsp;
  </p>
</blockquote>
</font>
<table CELLSPACING="0" BORDER="0" CELLPADDING="3" WIDTH="973">
<tr>
<td><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
.data
</p>
<p>
Arreglo DW 1000 DUP (?)
</p>
<p>
.code
</p>
<p>
...
</p>
<p>
MOV SI, OFFSET Arreglo
</p>
<p>
MOV AX, 0 ; AX va a tener el temporal para llevar el resultado
</p>
<p>
MOV CX, 0 ; CX la har� de contador
</p>
<p>
CicloForI:
</p>
<p>
ADD AX, [SI]
</p>
<p>
; Avanzar el apuntador al siguiente elemento del arreglo
</p>
<p>
ADD SI, 2
</p>
<p>
INC CX
</p>
<p>
CMP CX, 1000
</p>
<p>
JNE CicloForI
</p>
<p>
...</font></td>
</tr>
</table>
<font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
&nbsp;
</p>
<blockquote>
  <p><b>b) Construir estructuras de datos complejas</b>
  </p>
  <p>
  En ocasiones requeriremos estructuras de datos que no son simples arreglos o estructuras; por ejemplo, usaremos una lista ligada para acceder a un conjunto de datos en
  orden alfab�tico.
  </p>
  <p>
  Para construir la estructura usaremos un arreglo con datos especialmente pensados:
  </p>
  <blockquote>
    <p>
    Ser� un arreglo de alumnos
    </p>
    <p>
    Se aceptar�n hasta 1000 alumnos
    </p>
    <p>
    Cada registro de alumno usar� los campos de &quot;Nombre&quot; (20 caracteres), &quot;Matr�cula&quot; (6 caracteres), &quot;Promedio&quot; (3 caracteres con
    justificaci�n a la derecha y espacios de relleno), y &quot;Siguiente&quot;, que ser� un apuntador (un Word), el que inicializaremos con 0.
    </p>
  </blockquote>
</blockquote>
</font>
<table CELLSPACING="0" BORDER="0" CELLPADDING="3" WIDTH="973">
<tr>
<td><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
Alumnos DB 'Bruno', 15 DUP(' '), '123456', ' 85', 0, 0
</p>
<p>
DB 'Juanito', 13 DUP(' '), '987654', '100', 0, 0
</p>
<p>
DB 'Pepito del Cuento', 3 DUP(' '), '987654', '100', 0, 0</font></td>
</tr>
</table>
<font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
&nbsp;Como un ejemplo adicional, v�ase el recorrido de una lista:
</p>
<p>
&nbsp;
</p>
<div align="center">
  <center>
  <table border="0" cellpadding="0" cellspacing="0" width="100%">
  <tr>
  <td width="100%">
  <pre><plain>.model small
.stack 100h
.data
Head DW OFFSET Arreglo3</pre>
  <pre>
Arreglo DB '2'
	DW OFFSET Arreglo1</pre>
  <pre>
Arreglo1 DB '3'
	DW 0 	; Null por convencion</pre>
  <pre>
Arreglo2 DB '1'
	DW OFFSET Arreglo</pre>
  <pre>
Arreglo3 DB '0'
	DW OFFSET Arreglo2

.code
Principal PROC
	MOV AX, @data
	MOV DS, AX
	CALL RecorreLista
	MOV AH, 4Ch
	INT 21h
Principal ENDP

RecorreLista PROC
	MOV SI, Head ; el apuntador
CicloRecorre:
	CMP SI, 0 ; es NULL?
	JE FinLista
	MOV DL, [SI] ; imprime el contenido
	MOV AH, 2
	INT 21h
	MOV DL, 13 ; imprime salto de linea
	INT 21h
	MOV DL, 10
	INT 21h
	; Mover al siguiente
	MOV SI, [SI+1]
	JMP CicloRecorre
FinLista:
	RET
RecorreLista ENDP

END Principal
</plain></pre>
  </td>
  </tr>
  </table>
  </center>
</div>
<p>
&nbsp;
</p>
</font>

<p><img src="../../images/waveline.gif" alt="L�nea de separaci�n" width="756" height="16"> </p>

<h2><a name="objetivo">Bibliograf�a</a> </h2>

<ul>
    <li>PC Interno, Michael Tischer </li>
    <li>Manuales de Interrupciones, por ejemplo el ap�ndice C
        del libro de texto. </li>
</ul>

<p align="center"><img src="../../images/waveline.gif" alt="L�nea de separaci�n" width="756" height="16"> P�gina por
Bruno Guardia R. </p>
<div align="center"><center>

<address>
    <a href="mailto:bguardia@campus.ccm.itesm.mx" name="mailto:bguardia@campus.ccm.itesm.mx"><img src="../../images/mail.gif" alt="Correo" border="0" width="32" height="32"> bguardia@itesm.mx </a>
</address>
</center></div>

<p align="center"><em>Creada: Vi 7-Jun-96 </em><br>
<em>�ltima actualizaci�n: Lu 26/Sep/2000</em> </p>
</body>
</html>
