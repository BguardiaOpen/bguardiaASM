<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>

<head>

<meta name="GENERATOR" content="Microsoft FrontPage 4.0">
<title>Apuntadores</title>
</head>

<body background="../../images/fondo-uv.gif" bgcolor="#FFFFFF">

<h1 align="center">Tema #15 </h1>

<h1 align="center">Técnicas de programación: Apuntadores </h1>

<table border="1" cellpadding="2">
    <tr>
        <td><p align="center">
        <a href="clase14.htm"><img src="../../images/anterior.gif" alt="Sesión Anterior" border="0" width="32" height="32"><br>
        Clase Anterior</a>
 </p>
        </td>
        <td><a href="../Sesiones/sv09.htm"><img src="../../images/light.gif" alt="Sesión" border="0" width="40" height="40"><br>
        Sesión 9</a> </td>
        <td><p align="center"><a href="../Temas/clase16.htm"><img src="../../images/sigue.gif" alt="Sesión Siguiente" border="0" width="32" height="32"><br>
        Clase Siguiente</a> </p>
        </td>
    </tr>
</table>
<div align="center"><center>

<table border="0">
    <tr>
        <td><h2><a href="#objetivo">Objetivos Específicos</a> </h2>
        </td>
        <td><h2><a href="#teoria">Teoría </a></h2>
        </td>
        <td><h2><a href="#biblio">Bibliografía </a></h2>
        </td>
    </tr>
</table>
</center></div>

<p><img src="../../images/waveline.gif" alt="Línea de separación" width="756" height="16"> </p>

<h2><a name="objetivo">Objetivos Específicos</a> </h2>

<ul>
    <li>Comprender el concepto de apuntadores. </li>
    <li>Revisar su uso para acceder eficientemente a arreglos. </li>
    <li>Revisar su uso para construir listas y árboles. </li>
</ul>

<p><img src="../../images/waveline.gif" alt="Línea de separación" width="756" height="16"> </p>

<h2><a name="objetivo">Teoría</a> </h2>

<blockquote>
  <font FACE="Helv" SIZE="2" COLOR="#000000">
  <h3>¿Qué es un apuntador?</h3>
  <p>
  Existen diversos problemas en los cuales se requiere referenciar un dato. Por ejemplo, si tenemos la información de los alumnos de Ensamblador y sus calificaciones:
  </p>
  </blockquote>
</font>
<table CELLSPACING="0" BORDER="0" CELLPADDING="3" WIDTH="336">
<tr>
<td WIDTH="121"><b><font FACE="Helv" SIZE="2" COLOR="#000000">
<p ALIGN="CENTER">
Matrícula</font></b></td>
<td WIDTH="115"><b><font FACE="Helv" SIZE="2" COLOR="#000000">
<p ALIGN="CENTER">
Nombre</font></b></td>
<td WIDTH="76"><b><font FACE="Helv" SIZE="2" COLOR="#000000">
<p ALIGN="CENTER">
Carrera</font></b></td>
</tr>
<tr>
<td WIDTH="121"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
123456</font></td>
<td WIDTH="115"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
Juan</font></td>
<td WIDTH="76"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
ISC</font></td>
</tr>
<tr>
<td WIDTH="121"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
654321</font></td>
<td WIDTH="115"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
Luis</font></td>
<td WIDTH="76"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
ISE</font></td>
</tr>
<tr>
<td WIDTH="121"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
333111</font></td>
<td WIDTH="115"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
Pepe</font></td>
<td WIDTH="76"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
IEC</font></td>
</tr>
</table>
<p>&nbsp;</p>
<font FACE="Helv" SIZE="2" COLOR="#000000"></font>
<table CELLSPACING="0" BORDER="0" CELLPADDING="3" WIDTH="335">
<tr>
<td WIDTH="120"><b><font FACE="Helv" SIZE="2" COLOR="#000000">
<p ALIGN="CENTER">
Matrícula</font></b></td>
<td WIDTH="83"><b><font FACE="Helv" SIZE="2" COLOR="#000000">
<p ALIGN="CENTER">
Parcial</font></b></td>
<td WIDTH="108"><b><font FACE="Helv" SIZE="2" COLOR="#000000">
<p ALIGN="CENTER">
Calificación</font></b></td>
</tr>
<tr>
<td WIDTH="120"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
123456</font></td>
<td WIDTH="83"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
1</font></td>
<td WIDTH="108"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
80</font></td>
</tr>
<tr>
<td WIDTH="120"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
123456</font></td>
<td WIDTH="83"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
2</font></td>
<td WIDTH="108"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
93</font></td>
</tr>
<tr>
<td WIDTH="120"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
654321</font></td>
<td WIDTH="83"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
1</font></td>
<td WIDTH="108"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
87</font></td>
</tr>
<tr>
<td WIDTH="120"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
333111</font></td>
<td WIDTH="83"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
1</font></td>
<td WIDTH="108"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
69</font></td>
</tr>
</table>
<font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
&nbsp;
</p>
<blockquote>
  <p>
  Por ejemplo, la primera tabla describe la relación entre los alumnos, su nombre y su carrera. Mientras que la segunda, describe la relación entre los alumnos y sus
  calificaciones.
  </p>
  <p>
  En este contexto, la relación entre los dos arreglos que corresponderían a las tablas en memoria, está dada</font> <font FACE="Helv" SIZE="2" COLOR="#000000">por el
  campo de Matrícula, que es tipo entero. En general, en cualquier problema similar existirá un campo común que permite relacionar los dos arreglos.
  </p>
  <p>
  En el ejemplo de arriba, la relación es eficiente y minimiza el gasto de memoria; pero existen problemas en los que la relación requiere demasiada memoria, además de
  un algoritmo de búsqueda que requerirá más tiempo para ejecutarse. Por ejemplo:
  </p>

<blockquote>
  <p>
  &nbsp;
  </p>
  </blockquote>
<table CELLSPACING="0" BORDER="0" CELLPADDING="3" WIDTH="472">
<tr>
<td WIDTH="335"><b><font FACE="Helv" SIZE="2" COLOR="#000000">
<p ALIGN="CENTER">
Nombre</font></b></td>
<td WIDTH="1"><b><font FACE="Helv" SIZE="2" COLOR="#000000">
<p ALIGN="CENTER">
Carrera</font></b></td>
</tr>
<tr>
<td WIDTH="335"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
Juan Pablo Contreras Luna</font></td>
<td WIDTH="1"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
ISC</font></td>
</tr>
<tr>
<td WIDTH="335"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
Luis Alberto Gutiérrez de GomezLanda</font></td>
<td WIDTH="1"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
ISE</font></td>
</tr>
<tr>
<td WIDTH="335"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>José de Jesús Echeverría de los Monteros</font></td>
<td WIDTH="1"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
IEC</font></td>
</tr>
</table>
<p>&nbsp;</p>
<table CELLSPACING="0" BORDER="0" CELLPADDING="3" WIDTH="522">
<tr>
<td WIDTH="335"><b><font FACE="Helv" SIZE="2" COLOR="#000000">
<p ALIGN="CENTER">Nombre</font></b></td>
<td WIDTH="55"><b><font FACE="Helv" SIZE="2" COLOR="#000000">
<p ALIGN="CENTER">
Parcial</font></b></td>
<td WIDTH="108"><b><font FACE="Helv" SIZE="2" COLOR="#000000">
<p ALIGN="CENTER">
Calificación</font></b></td>
</tr>
<tr>
<td WIDTH="335">
<p>
<font FACE="Helv" SIZE="2" COLOR="#000000">
Juan Pablo Contreras Luna</font></td>
<td WIDTH="55"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
1</font></td>
<td WIDTH="108"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
80</font></td>
</tr>
<tr>
<td WIDTH="335">
<p>
<font FACE="Helv" SIZE="2" COLOR="#000000">
Juan Pablo Contreras Luna</font></td>
<td WIDTH="55"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
2</font></td>
<td WIDTH="108"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
93</font></td>
</tr>
<tr>
<td WIDTH="335">
<p>
<font FACE="Helv" SIZE="2" COLOR="#000000">
José de Jesús Echeverría de los Monteros</font></td>
<td WIDTH="55"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
1</font></td>
<td WIDTH="108"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
87</font></td>
</tr>
<tr>
<td WIDTH="335">
<p>
<font FACE="Helv" SIZE="2" COLOR="#000000">
Luis Alberto Gutiérrez de GomezLanda</font></td>
<td WIDTH="55"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
1</font></td>
<td WIDTH="108"><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
69</font></td>
</tr>
</table>
<p>
&nbsp;
</p>
  <p>
  En este caso, el campo común de los dos arreglos es bastante largo; por ello, la redundancia de ambos campos genera un alto consumo de memoria. Especialmente en los
  primeros tiempos del cómputo, cuando se empezaban a desarrollar los lenguajes de alto nivel, se tenían que buscar soluciones para hacer más eficiente el uso de la
  memoria; y como consecuencia, también más rápido el procesamiento. En este caso, el procesamiento resulta lento pues para encontrar la correspondencia, se tienen que
  hacer comparaciones de cadenas, las cuales son más costosas y requieren más accesos a memoria que, por ejemplo, la búsqueda de un entero que vimos en la sección
  previa (la matrícula).
  </p>
  <p>
  La primera y más directa solución consiste en sustituir el campo largo, en la segunda tabla, por un entero que permita la búsqueda más eficientemente. Podríamos
  crear un código que identifique a cada elemento del arreglo, en forma única, como fue la matrícula en el primer ejemplo. Sin embargo, no es necesario hacerlo, pues
  el arreglo tiene ya un identificador para cada elemento: el índice en el arreglo. Esto hace mucho más eficiente el acceso, pues ya no requiere comparaciones sino
  solamente calcular, en base al índice almacenado, la localidad donde está el elemento relacionado.
  </p>
  <p>
  Aún no es la solución más eficiente, puesto que se calcula la dirección destino, cuando podría almacenarse directamente. Por tanto, si en vez del índice en el
  arreglo guardamos la dirección de memoria donde se encuentra el elemento relacionado, no tendremos que hacer operaciones. Esto tiene además la ventaja de que permite
  relacionar elementos que no están en un arreglo y por lo tanto no se puede calcular tan eficientemente su dirección; de hecho, por esta última razón los apuntadores
  son la solución natural para estructuras de datos como los árboles y listas, que no siempre tendrán un orden en sus elementos como ocurre con los arreglos.
  </p>
  <p>
  &nbsp;
  </p>
  <h3>
  Acciones comunes con apuntadores:
  </h3>
  <p>
  Para ejemplificar el uso de apuntadores, verificaremos dos casos comunes de aplicación:
  </p>
  <p><b>a) Recorrido secuencial, apuntadores contra arreglos</b>&nbsp;
  </p>
  <p>
  En diversos algoritmos, necesitamos recorrer todos los elementos de un arreglo, especialmente en cadenas. Como ejemplo, veremos una función de sumatoria, que suma
  todos los elementos en un arreglo:
  </p>
  <p>
  En lenguaje C, el código sería:
  </p>
</blockquote>
</font>
<table CELLSPACING="0" BORDER="0" CELLPADDING="3" WIDTH="973">
<tr>
<td><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
int Arreglo[1000];
</p>
<p>
int Sumatoria()
</p>
<p>
{
</p>
<p>
int i, Temp;
</p>
<p>
&nbsp;
</p>
<p>
Temp = 0;
</p>
<p>
for (i = 0; i&lt;1000; i++)
</p>
<p>
Temp += Arreglo[i];
</p>
<p>
return Temp;
</p>
<p>
}</font></td>
</tr>
</table>
<font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
&nbsp;
</p>
<blockquote>
  <p>
  En este caso, estamos haciendo el recorrido de todos los elementos, y para cada elemento del arreglo se está calculando su dirección, utilizando la fórmula que vimos
  en el tema de &quot;Representación de datos&quot;. Esto es ineficiente, por lo que en vez de implementar el uso del arreglo en ensamblador, usaremos un apuntador para
  ir a través de él.
  </p>
  <p>
  &nbsp;
  </p>
</blockquote>
</font>
<table CELLSPACING="0" BORDER="0" CELLPADDING="3" WIDTH="973">
<tr>
<td><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
.data
</p>
<p>
Arreglo DW 1000 DUP (?)
</p>
<p>
.code
</p>
<p>
...
</p>
<p>
MOV SI, OFFSET Arreglo
</p>
<p>
MOV AX, 0 ; AX va a tener el temporal para llevar el resultado
</p>
<p>
MOV CX, 0 ; CX la hará de contador
</p>
<p>
CicloForI:
</p>
<p>
ADD AX, [SI]
</p>
<p>
; Avanzar el apuntador al siguiente elemento del arreglo
</p>
<p>
ADD SI, 2
</p>
<p>
INC CX
</p>
<p>
CMP CX, 1000
</p>
<p>
JNE CicloForI
</p>
<p>
...</font></td>
</tr>
</table>
<font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
&nbsp;
</p>
<blockquote>
  <p><b>b) Construir estructuras de datos complejas</b>
  </p>
  <p>
  En ocasiones requeriremos estructuras de datos que no son simples arreglos o estructuras; por ejemplo, usaremos una lista ligada para acceder a un conjunto de datos en
  orden alfabético.
  </p>
  <p>
  Para construir la estructura usaremos un arreglo con datos especialmente pensados:
  </p>
  <blockquote>
    <p>
    Será un arreglo de alumnos
    </p>
    <p>
    Se aceptarán hasta 1000 alumnos
    </p>
    <p>
    Cada registro de alumno usará los campos de &quot;Nombre&quot; (20 caracteres), &quot;Matrícula&quot; (6 caracteres), &quot;Promedio&quot; (3 caracteres con
    justificación a la derecha y espacios de relleno), y &quot;Siguiente&quot;, que será un apuntador (un Word), el que inicializaremos con 0.
    </p>
  </blockquote>
</blockquote>
</font>
<table CELLSPACING="0" BORDER="0" CELLPADDING="3" WIDTH="973">
<tr>
<td><font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
Alumnos DB 'Bruno', 15 DUP(' '), '123456', ' 85', 0, 0
</p>
<p>
DB 'Juanito', 13 DUP(' '), '987654', '100', 0, 0
</p>
<p>
DB 'Pepito del Cuento', 3 DUP(' '), '987654', '100', 0, 0</font></td>
</tr>
</table>
<font FACE="Helv" SIZE="2" COLOR="#000000">
<p>
&nbsp;Como un ejemplo adicional, véase el recorrido de una lista:
</p>
<p>
&nbsp;
</p>
<div align="center">
  <center>
  <table border="0" cellpadding="0" cellspacing="0" width="100%">
  <tr>
  <td width="100%">
  <pre><plain>.model small
.stack 100h
.data
Head DW OFFSET Arreglo3</pre>
  <pre>
Arreglo DB '2'
	DW OFFSET Arreglo1</pre>
  <pre>
Arreglo1 DB '3'
	DW 0 	; Null por convencion</pre>
  <pre>
Arreglo2 DB '1'
	DW OFFSET Arreglo</pre>
  <pre>
Arreglo3 DB '0'
	DW OFFSET Arreglo2

.code
Principal PROC
	MOV AX, @data
	MOV DS, AX
	CALL RecorreLista
	MOV AH, 4Ch
	INT 21h
Principal ENDP

RecorreLista PROC
	MOV SI, Head ; el apuntador
CicloRecorre:
	CMP SI, 0 ; es NULL?
	JE FinLista
	MOV DL, [SI] ; imprime el contenido
	MOV AH, 2
	INT 21h
	MOV DL, 13 ; imprime salto de linea
	INT 21h
	MOV DL, 10
	INT 21h
	; Mover al siguiente
	MOV SI, [SI+1]
	JMP CicloRecorre
FinLista:
	RET
RecorreLista ENDP

END Principal
</plain></pre>
  </td>
  </tr>
  </table>
  </center>
</div>
<p>
&nbsp;
</p>
</font>

<p><img src="../../images/waveline.gif" alt="Línea de separación" width="756" height="16"> </p>

<h2><a name="objetivo">Bibliografía</a> </h2>

<ul>
    <li>PC Interno, Michael Tischer </li>
    <li>Manuales de Interrupciones, por ejemplo el apéndice C
        del libro de texto. </li>
</ul>

<p align="center"><img src="../../images/waveline.gif" alt="Línea de separación" width="756" height="16"> Página por
Bruno Guardia R. </p>
<div align="center"><center>

<address>
    <a href="mailto:bguardia@campus.ccm.itesm.mx" name="mailto:bguardia@campus.ccm.itesm.mx"><img src="../../images/mail.gif" alt="Correo" border="0" width="32" height="32"> bguardia@itesm.mx </a>
</address>
</center></div>

<p align="center"><em>Creada: Vi 7-Jun-96 </em><br>
<em>Última actualización: Lu 26/Sep/2000</em> </p>
</body>
</html>
